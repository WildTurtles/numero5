CREATE TABLE CATEGORIES (id SERIAL NOT NULL, "desc" varchar(255) NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE GROUPS (id SERIAL NOT NULL, "desc" varchar(255) NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE GROUPS_USERS (id SERIAL NOT NULL, GROUP_id int4 NOT NULL, USER_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE IMMOVABLES (id SERIAL NOT NULL, name varchar(255) NOT NULL, description varchar(255), address varchar(255) NOT NULL, rental int4, rented bool NOT NULL, USER_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE IMMOVABLES_TENANTS (id SERIAL NOT NULL, date_end date, date_begin date, IMMOVABLE_id int4 NOT NULL, TENANT_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE RENTALS (id SERIAL NOT NULL, amount int4 NOT NULL, month int4, paid int4, date_limit timestamp, IMMOVABLE_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE RENTS (id SERIAL NOT NULL, account int4 NOT NULL, paid bool, "date" timestamp, TYPE_RENT_id int4 NOT NULL, RENTAL_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE TAXES (id SERIAL NOT NULL, amount int4 NOT NULL, IMMOVABLE_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE TAXES_CATEGORIES (id SERIAL NOT NULL, TAX_id int4 NOT NULL, CATEGORY_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE TENANTS (id SERIAL NOT NULL, name varchar(255) NOT NULL, firstname varchar(255) NOT NULL, email varchar(255) NOT NULL, USER_id int4 NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE TRANSACTIONS (id SERIAL NOT NULL, price int4 NOT NULL, taxe int4 NOT NULL, created timestamp NOT NULL, updated timestamp, USER_id int4 NOT NULL, PRIMARY KEY (id));
CREATE TABLE TYPE_RENTS (id SERIAL NOT NULL, type varchar(255), created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE TABLE USERS (id SERIAL NOT NULL, name varchar(255) NOT NULL, firstname varchar(255) NOT NULL, address varchar(255) NOT NULL, email varchar(255) NOT NULL, password varchar(255) NOT NULL, end_subcription timestamp NOT NULL, created timestamp NOT NULL, updated timestamp, PRIMARY KEY (id));
CREATE UNIQUE INDEX USERS_address ON USERS (address);
CREATE INDEX USERS_password ON USERS (password);
ALTER TABLE TRANSACTIONS ADD CONSTRAINT FKTRANSACTIO362459 FOREIGN KEY (USER_id) REFERENCES USERS (id);
ALTER TABLE TENANTS ADD CONSTRAINT FKTENANTS716286 FOREIGN KEY (USER_id) REFERENCES USERS (id);
ALTER TABLE TAXES ADD CONSTRAINT FKTAXES923572 FOREIGN KEY (IMMOVABLE_id) REFERENCES IMMOVABLES (id);
ALTER TABLE TAXES_CATEGORIES ADD CONSTRAINT FKTAXES_CATE922913 FOREIGN KEY (TAX_id) REFERENCES TAXES (id);
ALTER TABLE TAXES_CATEGORIES ADD CONSTRAINT FKTAXES_CATE269723 FOREIGN KEY (CATEGORY_id) REFERENCES CATEGORIES (id);
ALTER TABLE GROUPS_USERS ADD CONSTRAINT FKGROUPS_USE282946 FOREIGN KEY (GROUP_id) REFERENCES GROUPS (id);
ALTER TABLE GROUPS_USERS ADD CONSTRAINT FKGROUPS_USE653713 FOREIGN KEY (USER_id) REFERENCES USERS (id);
ALTER TABLE IMMOVABLES_TENANTS ADD CONSTRAINT FKIMMOVABLES867737 FOREIGN KEY (IMMOVABLE_id) REFERENCES IMMOVABLES (id);
ALTER TABLE IMMOVABLES_TENANTS ADD CONSTRAINT FKIMMOVABLES248990 FOREIGN KEY (TENANT_id) REFERENCES TENANTS (id);
ALTER TABLE IMMOVABLES ADD CONSTRAINT FKIMMOVABLES766545 FOREIGN KEY (USER_id) REFERENCES USERS (id);
ALTER TABLE RENTALS ADD CONSTRAINT FKRENTALS774040 FOREIGN KEY (IMMOVABLE_id) REFERENCES IMMOVABLES (id);
ALTER TABLE RENTS ADD CONSTRAINT FKRENTS503336 FOREIGN KEY (TYPE_RENT_id) REFERENCES TYPE_RENTS (id);
ALTER TABLE RENTS ADD CONSTRAINT FKRENTS734778 FOREIGN KEY (RENTAL_id) REFERENCES RENTALS (id);
